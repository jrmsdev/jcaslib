sudo: required

branches:
    only:
        - master

language: c

compiler:
    - gcc
    - clang

env:
    global:
        - DEBIAN_FRONTEND="noninteractive"

before_install: true

install:
    - sudo apt-get -qq update && sudo apt-get -qq -y install pmake libgdbm-dev

before_script:
    - $CC --version

script:
    - ./configure --use-gdbm
    - pmake
    - ./build/lib/libjc.so
    - pmake examples
    - pmake dist
    - pmake check
